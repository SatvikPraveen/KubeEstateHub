# Location: `/manifests/configs/analytics-configmap.yaml`

apiVersion: v1
kind: ConfigMap
metadata:
  name: analytics-configmap
  namespace: kubeestatehub
  labels:
    app: analytics-worker
    app.kubernetes.io/name: analytics-configmap
    app.kubernetes.io/component: config
    app.kubernetes.io/part-of: kubeestatehub
data:
  # Worker Configuration
  worker-concurrency: "4"
  WORKER_PREFETCH_COUNT: "10"
  WORKER_MAX_TASKS_PER_CHILD: "1000"
  WORKER_TIMEOUT: "300"

  # Queue Configuration
  queue-name: "analytics-tasks"
  QUEUE_ROUTING_KEY: "analytics.#"
  QUEUE_DURABLE: "true"
  DEAD_LETTER_EXCHANGE: "analytics-dlx"

  # Redis Configuration
  redis-url: "redis://redis-service:6379/1"
  REDIS_RESULT_BACKEND: "redis://redis-service:6379/2"
  REDIS_BROKER_TRANSPORT_OPTIONS: '{"master_name": "mymaster"}'

  # Analytics Configuration
  ANALYSIS_BATCH_SIZE: "100"
  MARKET_TREND_WINDOW_DAYS: "30"
  PRICE_PREDICTION_MODEL: "linear_regression"
  ENABLE_ML_FEATURES: "true"

  # Reporting Configuration
  REPORT_OUTPUT_FORMAT: "json"
  REPORT_RETENTION_DAYS: "90"
  ENABLE_EMAIL_REPORTS: "false"
  REPORT_SCHEDULE_TIMEZONE: "UTC"

  # External Data Sources
  MLS_API_ENDPOINT: "https://api.mls-data.com"
  MARKET_DATA_PROVIDER: "https://api.market-data.com"
  CENSUS_DATA_URL: "https://api.census.gov"

  # Performance Settings
  CHUNK_SIZE: "1000"
  MAX_MEMORY_USAGE: "1073741824" # 1GB
  ENABLE_PROFILING: "false"

  # Logging
  LOG_LEVEL: "info"
  LOG_FORMAT: "json"
  METRICS_PORT: "9090"
